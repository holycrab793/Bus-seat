<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>45ì¸ìŠ¹ ë²„ìŠ¤ ì¢Œì„ ë°°ì¹˜ë„</title>

  <style>
    * { margin:0; padding:0; box-sizing:border-box; }

    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      min-height:100vh;
      padding:12px;
    }

    .container{
      max-width: 980px;
      margin: 0 auto;
      background:#fff;
      border-radius:20px;
      padding:16px;
      box-shadow:0 20px 60px rgba(0,0,0,0.28);
    }

    h1{ text-align:center; color:#111827; margin:6px 0 8px; font-size:24px; font-weight:900; }
    .subtitle{ text-align:center; color:#6b7280; margin-bottom:14px; font-size:13px; font-weight:700; }

    .controls{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr 1fr;
      gap:10px;
      margin-bottom:14px;
    }
    @media (max-width: 520px){
      .controls{ grid-template-columns: 1fr 1fr; }
    }

    button{
      padding:12px;
      border:none;
      border-radius:12px;
      font-size:13px;
      font-weight:900;
      cursor:pointer;
      transition:all .2s;
    }
    button:active{ transform: translateY(1px); }

    .save-btn{ background:#10b981; color:#fff; }
    .clear-btn{ background:#ef4444; color:#fff; }
    .share-btn{ background:#3b82f6; color:#fff; }
    .download-btn{ background:#8b5cf6; color:#fff; }

    /* í°ì—ì„œëŠ” ê°€ë¡œ ìŠ¤í¬ë¡¤ë¡œ ë„“ì€ ë ˆì´ì•„ì›ƒ ë³´ê¸° */
    .capture-viewport{
      width: 100%;
      overflow-x:auto;
      -webkit-overflow-scrolling: touch;
      padding-bottom: 10px;
    }
    .hint{
      text-align:center;
      color:#6b7280;
      font-size:12px;
      font-weight:800;
      margin: 6px 0 10px;
    }

    /* âœ… ìº¡ì²˜ë˜ëŠ” ì‹¤ì œ ì˜ì—­(ê³ ì • í­) */
    #capture-area{
      width: 920px;
      margin: 0 auto;
      background:#ffffff;
      border-radius:18px;
      padding:18px;
      overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(17,24,39,0.06);
    }

    /* ìº¡ì²˜ ìƒë‹¨ ìš”ì•½ */
    .capture-header{
      background:#111827;
      color:#fff;
      border-radius:16px;
      padding:14px 14px;
      margin-bottom:14px;
    }
    .capture-title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      font-weight:950;
      font-size:16px;
      letter-spacing:-0.2px;
    }
    .capture-title .date{
      font-weight:900;
      font-size:13px;
      opacity:.86;
      white-space:nowrap;
    }
    .capture-metrics{
      margin-top:10px;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
    }
    .metric{
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.14);
      border-radius:14px;
      padding:12px 10px;
      text-align:center;
    }
    .metric .label{ font-size:12px; opacity:.86; font-weight:900; }
    .metric .value{ margin-top:4px; font-size:22px; font-weight:950; letter-spacing:-0.4px; }
    .metric.standing .value{ font-size:24px; }

    /* ë²„ìŠ¤ í”„ë ˆì„ */
    .bus{
      background:#f3f4f6;
      border-radius:18px;
      padding:16px 14px;
    }

    .driver-row{
      display:grid;
      grid-template-columns: 48px 1fr 44px 1fr;   /* âœ… 52px -> 48px */
      gap:12px;
      align-items:center;
      margin-bottom:14px;
    }
    .driver-row .row-number{ height:1px; }
    .driver-seat{
      background:#1f2937;
      color:#fff;
      padding:14px 10px;
      border-radius:14px;
      text-align:center;
      font-weight:950;
      font-size:16px;
    }
    .door{
      background:#f59e0b;
      color:#fff;
      padding:14px 10px;
      border-radius:14px;
      text-align:center;
      font-weight:950;
      font-size:16px;
    }
    .aisle{
      width:44px;
      text-align:center;
      font-size:16px;
      opacity:.8;
    }

    /* âœ… ì¢Œì„ ì¤„: ì¢Œì„ ì¹¼ëŸ¼ì„ ì‚´ì§ ë„“ê²Œ */
    .row{
      display:grid;
      grid-template-columns: 48px 1.08fr 1.08fr 44px 1.08fr 1.08fr; /* âœ… ì¢Œì„ ê°€ë¡œ í™•ëŒ€ */
      gap:12px;
      align-items:center;
      margin-bottom:12px;
    }
    .row-number{
      width:48px;             /* âœ… 52px -> 48px */
      text-align:center;
      font-weight:950;
      color:#6b7280;
      font-size:14px;
    }

    .seat{
      background:#fff;
      border:2px solid #e5e7eb;
      border-radius:14px;
      height:76px;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .seat:hover{ border-color:#667eea; }

    .seat-number{
      position:absolute;
      top:6px;
      left:8px;
      font-size:11px;
      font-weight:900;
      color:#9ca3af;
      pointer-events:none;
    }

    .seat input{
      width:100%;
      height:100%;
      border:none;
      outline:none;
      background:transparent;
      text-align:center;
      font-size:22px;
      font-weight:950;
      letter-spacing:-0.6px;
      padding: 10px 10px 8px;
      color:#111827;
    }
    .seat input::placeholder{ color: transparent; }

    .seat.filled{
      background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      border-color:#667eea;
    }
    .seat.filled .seat-number{ color: rgba(255,255,255,0.78); }
    .seat.filled input{ color:#fff; }

    /* âœ… ìº¡ì²˜ìš© í‘œì‹œ í…ìŠ¤íŠ¸(2ì¤„) */
    .seat-label{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 14px 12px 10px;
      text-align:center;
      font-weight:950;
      letter-spacing:-0.6px;
      line-height:1.05;
      pointer-events:none;

      display:-webkit-box;
      -webkit-box-orient:vertical;
      -webkit-line-clamp:2;
      overflow:hidden;

      font-size:22px;
      color:#111827;
    }
    .seat.filled .seat-label{ color:#fff; }
    body.capturing .seat input{ visibility:hidden; }

    /* ë§ˆì§€ë§‰ ì¤„(5ì¢Œì„) */
    .last-row-wrap{ margin-top:18px; }
    .last-row-title{
      text-align:center;
      font-weight:950;
      color:#6b7280;
      margin-bottom:10px;
    }
    .last-row{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap:12px;
    }

    /* ìƒíƒœ */
    .status{
      margin-top:14px;
      padding:12px;
      background:#ecfdf5;
      border-radius:14px;
      text-align:center;
      color:#166534;
      font-weight:950;
      font-size:16px;
    }

    /* ë³µë„(ì…ì„) */
    .standing{
      margin-top:14px;
      background:#f3f4f6;
      border-radius:16px;
      padding:14px;
    }
    .standing-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:12px;
    }
    .standing-title{
      font-weight:950;
      color:#111827;
      font-size:16px;
    }
    .standing-actions{ display:flex; gap:8px; }
    .mini-btn{
      padding:10px 12px;
      border-radius:12px;
      font-size:13px;
      font-weight:950;
      background:#e5e7eb;
      color:#111827;
    }

    .standing-list{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    .standing-item{
      background:#fff;
      border:2px solid #e5e7eb;
      border-radius:14px;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      height:62px;
    }
    .standing-badge{
      width:34px; height:34px;
      border-radius:12px;
      background:#111827;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      font-weight:950;
      font-size:14px;
      flex:0 0 auto;
    }
    .standing-item input{
      width:100%;
      border:none;
      outline:none;
      background:transparent;
      font-size:18px;
      font-weight:950;
      letter-spacing:-0.4px;
    }

    .toast{
      position:fixed;
      top:18px;
      left:50%;
      transform:translateX(-50%);
      background:#111827;
      color:#fff;
      padding:12px 18px;
      border-radius:12px;
      box-shadow:0 10px 40px rgba(0,0,0,.28);
      z-index:1000;
      opacity:0;
      transition:opacity .25s;
      max-width:92vw;
      text-align:center;
      white-space:pre-line;
      font-weight:850;
      font-size:13px;
      line-height:1.35;
    }
    .toast.show{ opacity:1; }
  </style>
</head>

<body>
  <div class="container">
    <h1>ğŸšŒ 45ì¸ìŠ¹ ë²„ìŠ¤ ì¢Œì„ë°°ì¹˜</h1>
    <div class="subtitle">ì…ë ¥ì€ í° í™”ë©´ì— ë§ê²Œ, ê³µìœ  ì´ë¯¸ì§€ëŠ” í¬ê²Œ(ê°€ë…ì„± ìš°ì„ )</div>

    <div class="controls">
      <button class="save-btn" onclick="saveAll()">ğŸ’¾ ì €ì¥</button>
      <button class="clear-btn" onclick="clearAll()">ğŸ—‘ï¸ ì‚­ì œ</button>
      <button class="share-btn" onclick="shareSeatingImage()">ğŸ”— ê³µìœ </button>
      <button class="download-btn" onclick="shareSeatingImage()">ğŸ“· ì‚¬ì§„ì €ì¥</button>
    </div>

    <div class="hint">ğŸ“Œ ì¢Œìš°ë¡œ ìŠ¤í¬ë¡¤í•˜ë©´ ì „ì²´ ë°°ì¹˜ê°€ ë³´ì…ë‹ˆë‹¤ (ê³µìœ  ì´ë¯¸ì§€ëŠ” ì „ì²´ í­ìœ¼ë¡œ ì €ì¥)</div>

    <div class="capture-viewport">
      <div id="capture-area">
        <div class="capture-header">
          <div class="capture-title">
            <div>ğŸšŒ ì¢Œì„ë°°ì¹˜ ìš”ì•½</div>
            <div class="date" id="capture-date"></div>
          </div>
          <div class="capture-metrics">
            <div class="metric">
              <div class="label">ì¢Œì„</div>
              <div class="value" id="metric-seat">0</div>
            </div>
            <div class="metric standing">
              <div class="label">ë³µë„(ì…ì„)</div>
              <div class="value" id="metric-standing">0</div>
            </div>
            <div class="metric">
              <div class="label">ì´ì›</div>
              <div class="value" id="metric-total">0</div>
            </div>
          </div>
        </div>

        <div class="bus">
          <div class="driver-row">
            <div class="row-number"></div>
            <div class="driver-seat">ğŸš— ìš´ì „ì„</div>
            <div class="aisle">ğŸš¶</div>
            <div class="door">ğŸšª ë¬¸</div>
          </div>

          <div id="bus-seats"></div>

          <div class="last-row-wrap">
            <div class="last-row-title">11</div>
            <div class="last-row" id="last-row"></div>
          </div>
        </div>

        <div class="status" id="status">íƒ‘ìŠ¹ì¸ì›: <strong>0</strong>ëª…</div>

        <div class="standing" id="standing">
          <div class="standing-header">
            <div class="standing-title">ğŸ§ ë³µë„(ì…ì„) íƒ‘ìŠ¹ì</div>
            <div class="standing-actions">
              <button class="mini-btn" type="button" onclick="addStanding()">+ ì¶”ê°€</button>
              <button class="mini-btn" type="button" onclick="removeStanding()">- ì‚­ì œ</button>
            </div>
          </div>
          <div class="standing-list" id="standing-list"></div>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    const STORAGE_KEY = 'bus-seating-wide-v2';

    let seatData = {};
    let standingData = [];
    let seatCounter = 1;

    const DEFAULT_STANDING_SLOTS = 6;
    const MAX_STANDING_SLOTS = 30;

    function pad(n){ return String(n).padStart(2,'0'); }

    function setCaptureDate(){
      const el = document.getElementById('capture-date');
      const d = new Date();
      el.textContent = `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} ${pad(d.getHours())}:${pad(d.getMinutes())}`;
    }

    function showToast(message){
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      clearTimeout(showToast._t);
      showToast._t = setTimeout(()=>toast.classList.remove('show'), 2600);
    }

    function detectEnv(){
      const ua = navigator.userAgent || '';
      return {
        isIOS: /iPhone|iPad|iPod/i.test(ua),
        isAndroid: /Android/i.test(ua),
        isKakaoInApp: /KAKAOTALK/i.test(ua)
      };
    }

    function createSeat(number){
      const seat = document.createElement('div');
      seat.className = 'seat';
      seat.dataset.seat = number;

      const seatNum = document.createElement('div');
      seatNum.className = 'seat-number';
      seatNum.textContent = number;
      seat.appendChild(seatNum);

      const input = document.createElement('input');
      input.type = 'text';
      input.placeholder = '';
      input.dataset.seat = number;

      input.addEventListener('input', (e)=>{
        const v = e.target.value.trim();
        if (v){
          seat.classList.add('filled');
          seatData[number] = v;
        } else {
          seat.classList.remove('filled');
          delete seatData[number];
        }
        updateStatus();
      });

      seat.appendChild(input);
      return seat;
    }

    function buildSeats(){
      const busSeats = document.getElementById('bus-seats');
      const lastRow = document.getElementById('last-row');
      busSeats.innerHTML = '';
      lastRow.innerHTML = '';
      seatCounter = 1;

      for (let row=1; row<=10; row++){
        const rowDiv = document.createElement('div');
        rowDiv.className = 'row';

        const rowNum = document.createElement('div');
        rowNum.className = 'row-number';
        rowNum.textContent = row;
        rowDiv.appendChild(rowNum);

        rowDiv.appendChild(createSeat(seatCounter++));
        rowDiv.appendChild(createSeat(seatCounter++));
        const aisle = document.createElement('div');
        aisle.className = 'aisle';
        aisle.textContent = 'ğŸš¶';
        rowDiv.appendChild(aisle);
        rowDiv.appendChild(createSeat(seatCounter++));
        rowDiv.appendChild(createSeat(seatCounter++));

        busSeats.appendChild(rowDiv);
      }

      for (let i=0;i<5;i++){
        lastRow.appendChild(createSeat(seatCounter++));
      }
    }

    function buildStanding(count){
      const list = document.getElementById('standing-list');
      list.innerHTML = '';

      const next = Array.from({ length: count }, (_, i) => (standingData[i] || ''));
      standingData = next;

      for (let i=0;i<count;i++){
        const item = document.createElement('div');
        item.className = 'standing-item';
        item.dataset.standing = i;

        const badge = document.createElement('div');
        badge.className = 'standing-badge';
        badge.textContent = i + 1;
        item.appendChild(badge);

        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = 'ì´ë¦„';
        input.dataset.standing = i;

        input.addEventListener('input', (e)=>{
          const v = e.target.value.trim();
          standingData[i] = v;
          updateStatus();
        });

        item.appendChild(input);
        list.appendChild(item);
      }
    }

    function addStanding(){
      const current = standingData.length;
      if (current >= MAX_STANDING_SLOTS){
        showToast(`âš ï¸ ë³µë„ íƒ‘ìŠ¹ìëŠ” ìµœëŒ€ ${MAX_STANDING_SLOTS}ëª…ê¹Œì§€ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
        return;
      }
      buildStanding(current + 1);
      updateStatus();
      showToast('â• ë³µë„ ì¹¸ ì¶”ê°€');
    }

    function removeStanding(){
      const current = standingData.length;
      if (current <= 1){
        showToast('âš ï¸ ë” ì´ìƒ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      const lastVal = (standingData[current - 1] || '').trim();
      if (lastVal && !confirm('ë§ˆì§€ë§‰ ë³µë„ ì¹¸ì˜ ì´ë¦„ì´ ì‚­ì œë©ë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

      buildStanding(current - 1);
      updateStatus();
      showToast('â– ë³µë„ ì¹¸ ì‚­ì œ');
    }

    function updateStatus(){
      const seatCount = Object.keys(seatData).length;
      const standingCount = standingData.filter(v => (v||'').trim()).length;
      const total = seatCount + standingCount;

      document.getElementById('status').innerHTML =
        `íƒ‘ìŠ¹ì¸ì›: <strong>${total}</strong>ëª… (ì¢Œì„ <strong>${seatCount}</strong>/45, ë³µë„ <strong>${standingCount}</strong>)`;

      document.getElementById('metric-seat').textContent = seatCount;
      document.getElementById('metric-standing').textContent = standingCount;
      document.getElementById('metric-total').textContent = total;
    }

    function saveAll(){
      try{
        localStorage.setItem(STORAGE_KEY, JSON.stringify({
          seatData,
          standingData,
          standingSlots: standingData.length
        }));
        showToast('ğŸ’¾ ì €ì¥ ì™„ë£Œ');
      } catch(e){
        console.error(e);
        showToast('âš ï¸ ì €ì¥ ì‹¤íŒ¨');
      }
    }

    function loadAll(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return;

        const payload = JSON.parse(raw) || {};
        seatData = payload.seatData || {};
        standingData = Array.isArray(payload.standingData) ? payload.standingData : [];
        const slots = payload.standingSlots || Math.max(DEFAULT_STANDING_SLOTS, standingData.length || 0);

        Object.keys(seatData).forEach(seatNum=>{
          const input = document.querySelector(`input[data-seat="${seatNum}"]`);
          if (input){
            input.value = seatData[seatNum];
            input.parentElement.classList.add('filled');
          }
        });

        buildStanding(Math.min(Math.max(1, slots), MAX_STANDING_SLOTS));
        standingData.forEach((name, i)=>{
          const input = document.querySelector(`input[data-standing="${i}"]`);
          if (input) input.value = name || '';
        });

      } catch(e){
        console.error(e);
      }
    }

    function clearAll(){
      if (!confirm('ì •ë§ë¡œ ëª¨ë“  ì¢Œì„/ë³µë„ íƒ‘ìŠ¹ìë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

      seatData = {};
      standingData = Array.from({ length: DEFAULT_STANDING_SLOTS }, ()=>'');

      document.querySelectorAll('input[data-seat]').forEach(inp=>{
        inp.value = '';
        inp.parentElement.classList.remove('filled');
      });

      buildStanding(DEFAULT_STANDING_SLOTS);
      try{ localStorage.removeItem(STORAGE_KEY); } catch(e){}

      updateStatus();
      showToast('ğŸ—‘ï¸ ì „ì²´ ì‚­ì œ ì™„ë£Œ');
    }

    /* ìº¡ì²˜ ì „ì²˜ë¦¬: input ëŒ€ì‹  seat-label ìƒì„±(2ì¤„ í´ë¨í”„) */
    function prepareSeatsForCapture(){
      document.querySelectorAll('.seat .seat-label').forEach(el=>el.remove());

      document.querySelectorAll('.seat').forEach(seat=>{
        const input = seat.querySelector('input');
        const name = (input && input.value) ? input.value.trim() : '';

        const label = document.createElement('div');
        label.className = 'seat-label';
        label.textContent = name ? name : '';
        seat.appendChild(label);
      });
    }

    function cleanupAfterCapture(){
      document.querySelectorAll('.seat .seat-label').forEach(el=>el.remove());
    }

    async function renderToPngFile(){
      const container = document.getElementById('capture-area');

      setCaptureDate();
      prepareSeatsForCapture();
      document.body.classList.add('capturing');

      const canvas = await html2canvas(container, {
        backgroundColor: '#ffffff',
        scale: 2,
        logging: false,
        scrollY: -window.scrollY,
        scrollX: -window.scrollX,
        width: container.scrollWidth,
        height: container.scrollHeight
      });

      document.body.classList.remove('capturing');
      cleanupAfterCapture();

      const blob = await new Promise((resolve, reject)=>{
        canvas.toBlob(b => (b ? resolve(b) : reject(new Error('toBlob failed'))), 'image/png');
      });

      const date = new Date().toISOString().slice(0,10);
      return new File([blob], `ë²„ìŠ¤ì¢Œì„ë°°ì¹˜_${date}.png`, { type:'image/png' });
    }

    async function shareSeatingImage(){
      const { isIOS, isAndroid, isKakaoInApp } = detectEnv();

      try{
        showToast('ğŸ“· ì´ë¯¸ì§€ ìƒì„±ì¤‘...');
        const file = await renderToPngFile();

        const canFileShare = !!(navigator.share && navigator.canShare && navigator.canShare({ files:[file] }));
        if (!canFileShare){
          showToast(isIOS ? 'âš ï¸ ê³µìœ ê°€ ì•ˆ ë˜ë©´ Safariì—ì„œ ì—´ì–´ì£¼ì„¸ìš”.' : 'âš ï¸ ê³µìœ ê°€ ì•ˆ ë˜ë©´ Chromeì—ì„œ ì—´ì–´ì£¼ì„¸ìš”.');
          return;
        }

        // âœ… filesë§Œ ê³µìœ (ì¹´í†¡ì— í…ìŠ¤íŠ¸ ë¶™ëŠ” ê²ƒ ë°©ì§€)
        await navigator.share({ files:[file] });

        if (isKakaoInApp){
          showToast('âœ… ì¹´í†¡ì—ëŠ” ì‚¬ì§„ë§Œ ì „ì†¡ë©ë‹ˆë‹¤.\nì‚¬ì§„ ì•± ì €ì¥ì€ ê³µìœ  ë©”ë‰´ì—ì„œ â€œì‚¬ì§„ì— ì €ì¥â€ ì„ íƒ');
        } else if (isIOS){
          showToast('âœ… ê³µìœ  ë©”ë‰´ì—ì„œ â€œì‚¬ì§„ì— ì €ì¥â€ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
        } else if (isAndroid){
          showToast('âœ… ê°¤ëŸ¬ë¦¬/Google í¬í† ë¡œ ì €ì¥ ë˜ëŠ” ì¹´í†¡ ê³µìœ ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
        } else {
          showToast('âœ… ê³µìœ  ì™„ë£Œ');
        }
      } catch(e){
        console.error(e);
        showToast('âš ï¸ ê³µìœ ê°€ ì·¨ì†Œë˜ì—ˆê±°ë‚˜ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      }
    }

    // ìë™ì €ì¥
    let saveTimeout;
    document.addEventListener('input', (e)=>{
      const t = e.target;
      if (!(t && t.matches)) return;
      if (!(t.matches('input[data-seat]') || t.matches('input[data-standing]'))) return;

      clearTimeout(saveTimeout);
      saveTimeout = setTimeout(()=>saveAll(), 900);
    });

    function init(){
      buildSeats();
      buildStanding(DEFAULT_STANDING_SLOTS);
      loadAll();
      updateStatus();
      setCaptureDate();
    }

    init();
  </script>
</body>
</html>
